/* =========================
   SOUL MIRROR (魔法紫調)
   只作用於 <html class="page--soulmirror">
   ========================= */
:root{
  --ink:#EDEBFF;                /* 文字銀白 */
  --violet:#9B8CFF;             /* 柔紫 */
  --violet-deep:#5B47CE;        /* 深紫 */
  --pink:#FFB6E6;               /* 夢幻粉 */
  --aqua:#9FE3FF;               /* 冷光藍 */
  --glass:rgba(255,255,255,.08);
  --glass-2:rgba(185,170,255,.14);
  --glow:0 0 48px rgba(160,140,255,.45), 0 0 96px rgba(120,220,255,.25);
}

html.page--soulmirror, html.page--soulmirror body{
  background:
    radial-gradient(1200px 600px at 15% 10%, rgba(170,190,255,.12), transparent 60%),
    radial-gradient(1000px 520px at 85% 15%, rgba(255,180,240,.10), transparent 65%),
    linear-gradient(180deg, #0d0e1a 0%, #0e1330 60%, #0b0f26 100%);
  color:var(--ink);
  min-height:100%;
  font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI", Roboto, "PingFang TC", sans-serif;
  overflow-x:hidden;
}

/* 3.5s 開場 */
#intro{
  position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
  background:
    radial-gradient(1200px 680px at 50% 40%, rgba(160,170,255,.15), transparent 70%),
    linear-gradient(180deg, #0b0f24 0%, #0a0c1a 100%);
  animation: introFade 3.5s ease forwards;
}
#intro .logo{
  text-align:center; letter-spacing:.14em;
  font-family: "Orbitron", ui-sans-serif;
  font-size: clamp(20px, 4.3vw, 40px);
  color: var(--ink);
  text-shadow: 0 0 18px rgba(180,200,255,.55);
}
#intro .sub{
  margin-top:10px; font-size: clamp(12px, 2vw, 16px);
  opacity:.85; font-style: italic;
}
@keyframes introFade{
  0%{opacity:1; filter:blur(0)}
  80%{opacity:1}
  100%{opacity:0; visibility:hidden}
}

/* 星塵層（沿用你 <canvas id="starfield">） */
canvas#starfield{ position:fixed; inset:0; z-index:0; pointer-events:none; }

/* 版心 */
.mirror-wrap{
  position:relative; z-index:1; width:min(980px, 92vw);
  margin: clamp(64px, 8vh, 90px) auto 80px;
}

/* 標題區 */
.subheading{
  text-align:center; margin-bottom:18px;
}
.subheading .en{
  display:block; font-family:"Orbitron", ui-sans-serif;
  font-weight:500; font-style:italic; letter-spacing:.18em;
  font-size: clamp(18px,3.6vw,28px);
  color:var(--ink);
  text-shadow: var(--glow);
}
.magic-lines{
  text-align:center; margin:10px auto 16px; opacity:.9;
}
.magic-lines .wand{ font-size:13px; letter-spacing:.08em; opacity:.9; }
.magic-lines .txt{ font-size:14px; margin-top:6px; opacity:.9; }
.magic-lines .strong{
  display:block; margin-top:8px; font-weight:800;
  text-shadow:0 0 24px rgba(160,140,255,.55);
}

/* 題目 5×5 網格 */
.question-grid{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
  gap:12px; margin:22px auto 26px;
}
.option{
  padding:14px 12px; line-height:1.4;
  background:linear-gradient(180deg, var(--glass-2), rgba(255,255,255,.04));
  border:1px solid rgba(180,170,255,.22);
  border-radius:14px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 10px 30px rgba(50,30,120,.28);
  cursor:pointer; user-select:none; transition: transform .2s ease, box-shadow .2s ease;
  backdrop-filter: blur(6px);
}
.option:hover{
  transform: translateY(-4px);
  box-shadow: 0 16px 46px rgba(120,90,220,.45), inset 0 0 0 1px rgba(255,255,255,.05);
}

/* 解析泡泡 + 三鳥一句話 */
.result-box{
  margin:22px auto 8px; padding:18px 18px;
  border-radius:18px;
  background: linear-gradient(180deg, rgba(55,40,140,.28), rgba(25,22,70,.24));
  border:1px solid rgba(160,150,255,.25);
  box-shadow: var(--glow), inset 0 0 120px rgba(155,120,255,.08);
}
.result-box .txt{
  font-size:15px; line-height:1.9; letter-spacing:.02em; white-space:pre-line;
}
.result-box .three{
  display:grid; grid-template-columns: repeat(3,1fr);
  gap:16px; margin-top:14px; align-items:center;
}
.result-box .three img{ width:22px; height:22px; vertical-align:-4px; margin-right:6px; }

/* 魔鏡邊緣微光（容器加一圈不規則光暈） */
.mirror-wrap::before{
  content:""; position:absolute; inset:-32px -24px; z-index:-1; pointer-events:none;
  background:
    radial-gradient(600px 180px at 30% -10%, rgba(155,120,255,.35), transparent 70%),
    radial-gradient(520px 160px at 80% 0%, rgba(120,220,255,.25), transparent 70%);
  filter: blur(20px); opacity:.75; animation: breathe 6s ease-in-out infinite;
}
@keyframes breathe{
  0%,100%{ transform:translateY(0); opacity:.8 }
  50%{ transform:translateY(8px); opacity:1 }
}

/* 置中工具列（沿用你左側圖標） */
.constellation-toolbar{
  position:fixed; left:16px; top:50%; transform:translateY(-50%);
  display:grid; gap:10px; z-index:2; opacity:.9;
}
.constellation-toolbar a{
  display:grid; place-items:center; width:34px; height:34px; border-radius:10px;
  background:var(--glass); border:1px solid rgba(200,200,255,.18);
  box-shadow:0 6px 18px rgba(40,30,100,.35); backdrop-filter: blur(6px);
}
.constellation-toolbar a:hover{ transform:translateY(-2px); }

/* 手機微調 */
@media (max-width: 768px){
  .result-box .three{ grid-template-columns:1fr; }
}
