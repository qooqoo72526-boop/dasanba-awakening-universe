/* =========================
   SOUL MIRROR (魔法紫調)
   只作用於 <html class="page--soulmirror">
   ========================= */
:root{
  --ink:#EDEBFF;                /* 文字銀白 */
  --violet:#9B8CFF;             /* 柔紫 */
  --violet-deep:#5B47CE;        /* 深紫 */
  --pink:#FFB6E6;               /* 夢幻粉 */
  --aqua:#9FE3FF;               /* 冷光藍 */
  --glass:rgba(255,255,255,.08);
  --glass-2:rgba(185,170,255,.14);
  --glow:0 0 48px rgba(160,140,255,.45), 0 0 96px rgba(120,220,255,.25);
}

html.page--soulmirror, html.page--soulmirror body{
  background:
    radial-gradient(1200px 600px at 15% 10%, rgba(170,190,255,.28), transparent 55%),
    radial-gradient(900px 520px at 85% 90%, rgba(120,80,255,.35), transparent 60%),
    radial-gradient(680px 480px at 50% 40%, rgba(255,180,255,.18), transparent 65%),
    #050618;
  color:var(--ink);
}

/* 3.5s 開場 */
#intro{
  position:fixed; inset:0; z-index:9999; display:grid; place-items:center;
  background:
    radial-gradient(1200px 680px at 50% 40%, rgba(160,170,255,.15), transparent 70%),
    linear-gradient(180deg, #0b0f24 0%, #0a0c1a 100%);
  animation: introFade 3.5s ease forwards;
}
#intro .logo{
  text-align:center; letter-spacing:.14em;
  font-family: "Orbitron", ui-sans-serif;
  font-size: clamp(20px, 4.3vw, 40px);
  color: var(--ink);
  text-shadow: 0 0 18px rgba(180,200,255,.55);
}
#intro .sub{
  margin-top:10px; font-size: clamp(12px, 2vw, 16px);
  opacity:.85; font-style: italic;
}
@keyframes introFade{
  0%{opacity:1; filter:blur(0)}
  80%{opacity:1}
  100%{opacity:0; visibility:hidden}
}

/* 星塵層（沿用你 <canvas id="starfield">） */
canvas#starfield{ position:fixed; inset:0; z-index:0; pointer-events:none; }

/* 版心 */
.mirror-wrap{
  position:relative; z-index:1; width:min(980px, 92vw);
  margin: clamp(64px, 8vh, 90px) auto 80px;
}

/* 標題區 */
.subheading{
  text-align:center; margin-bottom:18px;
}
.subheading .en{
  display:block; font-family:"Orbitron", ui-sans-serif;
  font-weight:500; font-style:italic; letter-spacing:.18em;
  font-size: clamp(18px,3.6vw,28px);
  color:var(--ink);
  text-shadow: var(--glow);
}
.magic-lines{
  text-align:center; margin:10px auto 16px; opacity:.9;
}
.magic-lines .wand{ font-size:13px; letter-spacing:.08em; opacity:.9; }
.magic-lines .txt{ font-size:14px; margin-top:6px; opacity:.9; }
.magic-lines .strong{
  display:block; margin-top:8px; font-weight:800;
  text-shadow:0 0 24px rgba(160,140,255,.55);
}

/* 題目 5×5 網格 */
.question-grid{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(180px,1fr));
  gap:12px; margin:22px auto 26px;
}
.option{
  padding:14px 12px; line-height:1.4;
  background:linear-gradient(180deg, var(--glass-2), rgba(255,255,255,.04));
  border:1px solid rgba(180,170,255,.22);
  border-radius:14px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 10px 30px rgba(50,30,120,.28);
  cursor:pointer; user-select:none; transition: transform .2s ease, box-shadow .2s ease;
  backdrop-filter: blur(6px);
}
.option:hover{
  transform: translateY(-4px);
  box-shadow: 0 16px 46px rgba(120,90,220,.45), inset 0 0 0 1px rgba(255,255,255,.05);
}

/* 解析泡泡 + 三鳥一句話 */
.result-box{
  margin:22px auto 8px; padding:18px 18px;
  border-radius:18px;
  background: linear-gradient(180deg, rgba(55,40,140,.28), rgba(25,22,70,.24));
  border:1px solid rgba(160,150,255,.25);
  box-shadow: var(--glow), inset 0 0 120px rgba(155,120,255,.08);
}
.result-box .txt{
  font-size:15px; line-height:1.9; letter-spacing:.02em; white-space:pre-line;
}
.result-box .three{
  display:grid; grid-template-columns: repeat(3,1fr);
  gap:16px; margin-top:14px; align-items:center;
}
.result-box .three img{ width:22px; height:22px; vertical-align:-4px; margin-right:6px; }

/* 魔鏡邊緣微光（容器加一圈不規則光暈） */
.mirror-wrap::before{
  content:""; position:absolute; inset:-32px -24px; z-index:-1; pointer-events:none;
  background:
    radial-gradient(600px 180px at 30% -10%, rgba(155,120,255,.35), transparent 70%),
    radial-gradient(520px 160px at 80% 0%, rgba(120,220,255,.25), transparent 70%);
  filter: blur(20px); opacity:.75; animation: breathe 6s ease-in-out infinite;
}
@keyframes breathe{
  0%,100%{ transform:translateY(0); opacity:.8 }
  50%{ transform:translateY(8px); opacity:1 }
}

/* 置中工具列（沿用你左側圖標） */
.constellation-toolbar{
  position:fixed; left:16px; top:50%; transform:translateY(-50%);
  display:grid; gap:10px; z-index:2; opacity:.9;
}
.constellation-toolbar a{
  display:grid; place-items:center; width:34px; height:34px; border-radius:10px;
  background:var(--glass); border:1px solid rgba(200,200,255,.18);
  box-shadow:0 6px 18px rgba(40,30,100,.35); backdrop-filter: blur(6px);
}
.constellation-toolbar a:hover{ transform:translateY(-2px); }

/* 手機微調 */
@media (max-width: 768px){
  .result-box .three{ grid-template-columns:1fr; }
}
.ico-mirror {
  width: 18px;
  height: 18px;
  fill: rgba(255,255,255,0.85);
  filter: drop-shadow(0 0 4px rgba(120,150,255,0.9));
  margin-left: 6px;
  transform: translateY(2px);
}
/* ===== 標題：靈魂照妖鏡 SOUL MIRROR（紫色魔法區） ===== */
.subheading{
  position:relative;
  display:inline-flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  margin:24px auto 26px;
  padding:10px 24px;
  text-align:center;

  font-family:"Noto Sans TC", sans-serif;
  font-size:clamp(22px, 3vw, 32px);
  letter-spacing:2px;
  color:rgba(245,250,255,0.96);
  text-shadow:0 0 14px rgba(120,180,255,0.45);

  /* 標題浮起來 0.6 秒進場 */
  animation:titleFloatIn .6s ease-out both;
}

/* 中文主標：比較厚實一點 */
.subheading .zh{
  font-weight:600;
}

/* 中間的 · 符號 */
.subheading .divider{
  opacity:.7;
  font-size:.85em;
  margin:0 2px;
}

/* 英文 SOUL MIRROR：細斜體、科幻感 */
.subheading .en{
  font-family:"Orbitron", sans-serif;
  font-size:clamp(18px, 2.4vw, 26px);
  font-style:italic;
  letter-spacing:.2em;
  color:rgba(210,225,255,0.98);
  text-shadow:0 0 10px rgba(130,170,255,0.5);
}

/* 背後紫色魔法煙霧（低飽和） */
.subheading::before{
  content:"";
  position:absolute;
  inset:-18px -36px;
  background:
    radial-gradient(120% 200% at 10% 0%,
      rgba(180,150,255,0.26), transparent 60%),
    radial-gradient(110% 180% at 92% 100%,
      rgba(120,200,255,0.18), transparent 70%);
  filter:blur(18px);
  opacity:.9;
  z-index:-1;
}

/* emoji 圖示：鏡子＋魔法棒 */
.icon-inline{
  font-family:"Segoe UI Emoji","Noto Color Emoji",
              "Apple Color Emoji",sans-serif;
  font-size:1.15em;
  display:inline-block;
  position:relative;
}

/* 鏡子：冷藍微光＋上下漂浮 */
.icon-inline.mirror{
  animation:floatIcon 3.4s ease-in-out infinite;
  filter:drop-shadow(0 0 6px rgba(110,150,255,0.9));
}

/* 魔法棒：紫光更強一點，也在漂浮 */
.icon-inline.wand{
  margin-left:2px;
  animation:floatIcon 2.8s ease-in-out infinite;
  filter:
    drop-shadow(0 0 6px rgba(170,120,255,0.95))
    drop-shadow(0 0 14px rgba(130,80,255,0.6));
}

/* --- 標題進場動畫 --- */
@keyframes titleFloatIn{
  0%{
    opacity:0;
    transform:translateY(12px) scale(.97);
  }
  100%{
    opacity:1;
    transform:translateY(0) scale(1);
  }
}

/* --- 鏡子 / 魔法棒上下漂浮（y 軸 4px） --- */
@keyframes floatIcon{
  0%,100%{
    transform:translateY(0);
  }
  50%{
    transform:translateY(-4px);
  }
}
