/* v9.3.5_homecards_hotfix â€” Homepage cards only (no background changes) */
/* Safe add-on: link this CSS after your existing universe.css/style.css */

/* Scope to homepage only if you already use a marker; fallback keeps it narrow */
body[data-page="home"] .character-cards,
body.home .character-cards,
.character-cards {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(14px, 2vw, 22px);
  align-items: stretch;
}

/* Card container: unified aspect ratio to avoid weird heights */
.character-card {
  position: relative;
  border-radius: 20px;
  overflow: hidden;
  /* Keep your original glass/border; don't redefine background */
  aspect-ratio: 5 / 6;            /* portrait-ish, avoids 'éå¯¬' */
  min-height: 260px;
}

/* Image should never crop heads: use contain + per-bird offsets */
.character-card img {
  width: 100%;
  height: 100%;
  object-fit: contain;             /* no cropping */
  object-position: center top;     /* bias to top soé ­éƒ¨ä¸è¢«åˆ‡ */
  display: block;
  transform: translateZ(0);
}

/* Per-bird fine-tune (auto-added class via JS) */
.character-card.ajin img   { object-position: 50% 8%; }
.character-card.migou img  { object-position: 50% 10%; }
.character-card.gungun img { object-position: 50% 12%; }

/* Heart icon: always pinned to top-right, consistent offset */
.character-card .heart,
.character-card .like,
.character-card .fav {
  position: absolute !important;
  top: 10px !important;
  right: 12px !important;
  transform: none !important;
  z-index: 3;
  pointer-events: auto;
}

/* Title/labels inside card remain readable atop images */
.character-card .label,
.character-card .title {
  position: absolute;
  left: 12px; bottom: 10px;
  z-index: 3;
  /* do not change fonts/colors; just ensure readability */
  text-shadow: 0 2px 8px rgba(0,0,0,.35);
}

/* Responsive: stack on small screens */
@media (max-width: 900px){
  .character-cards{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 600px){
  .character-cards{ grid-template-columns: 1fr; }
  .character-card{ aspect-ratio: 4 / 5; }
}
/* ===== v9.3.7g â€” HOME å°ˆç”¨ï¼šå¡ç‰‡ 3:4 + æ„›å¿ƒå®šä½/å…‰æšˆ + ç•«å»Šæ¨™é¡Œèˆ‡é«˜åº¦ + è‡ªå‹•æ’­æ”¾é¡¯ç¤º ===== */

/* å¡ç‰‡å›ºå®š 3:4ï¼ˆæ¡Œæ©Ÿï¼‰ */
body:not([data-page]) section.cards .card{
  width: 300px !important;
  height: 400px !important;           /* 3:4 */
  border-radius: 18px;
  overflow: hidden;
  transition: transform .25s ease, box-shadow .25s ease;
}
body:not([data-page]) section.cards .card:hover{
  transform: translateY(-6px);
  box-shadow: 0 0 36px rgba(255,255,255,.16);
}

/* å¡ç‰‡å…§åœ–ï¼šé¿å…è¢«åˆ‡é ­ï¼Œä¿æŒ 3:4 è¦–è¦º */
body:not([data-page]) section.cards .card img{
  width: 100%;
  height: 255px !important;
  object-fit: cover;
  object-position: 50% 18%;
  display: block;
  filter: drop-shadow(0 0 14px rgba(255,255,255,.22));
}

/* æ„›å¿ƒå®šä½åœ¨åå­—å‰æ–¹ï¼Œä¸‰è‰²å…‰æšˆï¼‹å¾®è·³å‹• */
body:not([data-page]) section.cards .card .heart{
  position: absolute;
  top: 10px; left: 14px;               /* å›ºå®šåœ¨å¡ç‰‡å·¦ä¸Š */
  font-size: 16px; line-height: 1;
  filter: drop-shadow(0 0 8px currentColor);
  animation: heartPulse 2.3s infinite ease-in-out;
}
body:not([data-page]) .card.ajin   .heart{ color:#FFD400; } /* ğŸ’› */
body:not([data-page]) .card.migou  .heart{ color:#FF5A5A; } /* â¤ï¸ */
body:not([data-page]) .card.gungun .heart{ color:#2B78FF; } /* ğŸ’™ */

@keyframes heartPulse{
  0%,100%{ transform: translateY(0) scale(1);   opacity:.95;}
  50%    { transform: translateY(-1px) scale(1.06); opacity:1;}
}

/* ç•«å»Šæ¨™é¡Œç½®ä¸­ã€è¡Œè·æ”¾é¬† */
body:not([data-page]) section.gallery h4{
  margin: 24px auto 10px;
  text-align: center;
  letter-spacing:.06em;
}

/* ç•«å»Šå¤–æ¡†é«˜åº¦ï¼ˆæ¡Œæ©Ÿï¼‰ */
body:not([data-page]) section.gallery .gframe{
  width: min(1080px, 94vw);
  margin: 0 auto 24px;
  border-radius: 18px;
  padding: 0;
  overflow: hidden;
  background: rgba(255,255,255,.06);
  box-shadow: 0 0 20px rgba(0,0,0,.18) inset, 0 0 14px rgba(255,255,255,.12);
  min-height: 38vh;                    /* æé«˜ä¸€é»ï¼Œé¿å…ã€Œå¡åˆ°é ­ã€ */
}

/* åªæœ‰ .active é¡¯ç¤ºï¼Œå…¶ä»–éš±è—ï¼ˆé…åˆ main.js è‡ªå‹•è¼ªæ’­ï¼‰ */
body:not([data-page]) section.gallery .gimg{ display:none !important; }
body:not([data-page]) section.gallery .gimg.active{
  display:block !important;
  width:100%; height:auto;
  animation: galleryFade 1.1s ease;
}
@keyframes galleryFade{ from{opacity:0; transform:scale(1.01)} to{opacity:1; transform:scale(1)} }

/* RWDï¼šå¹³æ¿èˆ‡æ‰‹æ©Ÿ */
@media (max-width: 1024px){
  body:not([data-page]) section.cards{ gap: 16px; }
  body:not([data-page]) section.cards .card{
    width: 28vw !important;
    height: calc(28vw * 4 / 3) !important;      /* ä»ç¶­æŒ 3:4 */
  }
  body:not([data-page]) section.cards .card img{
    height: calc(28vw * .78) !important;
  }
}
@media (max-width: 768px){
  body:not([data-page]) section.cards{ gap: 12px; }
  body:not([data-page]) section.cards .card{
    width: 46vw !important;
    height: calc(46vw * 4 / 3) !important;      /* æ‰‹æ©Ÿ 3:4 */
  }
  body:not([data-page]) section.cards .card img{
    height: calc(46vw * .78) !important;
  }
  body:not([data-page]) section.gallery .gframe{ min-height: 34vh; }
}
