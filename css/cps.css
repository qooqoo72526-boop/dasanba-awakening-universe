:root{
  --ink:#eaf1ff; --soft:rgba(255,255,255,.08);
  --pink:#ffb7d5; --blue:#90a4ff; --vio:#c9b9ff; --cyan:#9ff3ff;
  --glow:0 0 12px rgba(160,190,255,.8), 0 0 36px rgba(120,180,255,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; overflow:hidden; color:var(--ink);
  font-family: "Noto Sans TC","Segoe UI",system-ui,Arial; 
  background: radial-gradient(1200px 900px at 70% 25%, rgba(160,180,255,.10), transparent 60%),
              radial-gradient(900px 800px  at 20% 70%, rgba(255,200,230,.08), transparent 65%),
              radial-gradient(900px 500px  at 50% 50%, rgba(255,255,255,.05), transparent 70%),
              #061733;
}

/* 發光小字標頭 */
.cps-header{
  position:fixed; left:50%; top:26px; transform:translateX(-50%);
  text-align:center; line-height:1.2; letter-spacing:.08em;
  filter: drop-shadow(0 0 10px rgba(120,180,255,.5));
  z-index:5;
}
.cps-header .en{font-family:Orbitron,monospace; font-size:13px; opacity:.9; text-shadow:var(--glow)}
.cps-header .zh{font-size:12px; opacity:.8; margin-top:4px; text-shadow:var(--glow)}

/* 次標：會隨機閃爍 */
.cps-sub{
  position:fixed; left:50%; top:70px; transform:translateX(-50%);
  font: 300 12px/1.2 Orbitron,monospace; letter-spacing:.08em;
  opacity:.85; animation: twinkle 2.8s infinite ease-in-out;
  z-index:5;
}
@keyframes twinkle{
  0%,100%{opacity:.85; text-shadow:none}
  50%{opacity:1; text-shadow:0 0 12px rgba(255,255,255,.6)}
}

/* 星點畫布鋪滿 */
#stars{position:fixed; inset:0; z-index:0}

/* 不規則拼貼 */
.collage{
  position:fixed; inset:auto 0 18vh 0; height:58vh; z-index:1;
  display:grid; place-items:center;
  grid-template-columns: 28vw 20vw 22vw 18vw;
  grid-auto-rows: 26vh;
  gap:2.2vw;
  padding:0 6vw;
}
.collage img{
  width:100%; height:100%; object-fit:cover; border-radius:20px;
  box-shadow:0 12px 40px rgba(0,0,0,.35);
  filter:saturate(108%) contrast(105%) brightness(103%);
  opacity:.95; transform:translateY(0);
  animation: float 8s ease-in-out infinite alternate;
}
.h{aspect-ratio:16/9}
.v{aspect-ratio:9/16}
.h1{grid-column:1/span 2; grid-row:1}
.h2{grid-column:3/span 2; grid-row:2}
.v-ajin{grid-column:1; grid-row:2}
.v-migou{grid-column:2; grid-row:1}
.v-gungun{grid-column:4; grid-row:1}
@keyframes float{
  to{ transform:translateY(-14px) }
}

/* 對話區（無框、雲狀光暈） */
.chat-zone{
  position:fixed; left:50%; top:18vh; transform:translateX(-50%);
  width:min(820px,88vw); z-index:3;
}
.persona-toggle{
  display:flex; gap:14px; justify-content:center; margin-bottom:12px;
  font: 400 13px/1 Orbitron,monospace;
  opacity:.85;
}
.persona-toggle input{accent-color:#ffd54f}

.chat-stream{
  min-height:160px; max-height:42vh; overflow:auto; padding:18px 20px;
  border-radius:28px; backdrop-filter: blur(10px) saturate(120%);
  background: radial-gradient(600px 300px at 40% 10%, rgba(255,255,255,.08), transparent 60%),
              radial-gradient(500px 240px at 70% 90%, rgba(160,190,255,.08), transparent 60%),
              rgba(255,255,255,.06);
  box-shadow: inset 0 0 40px rgba(255,255,255,.06), 0 14px 50px rgba(0,0,0,.35);
}
.msg{margin:10px 0; line-height:1.6; font-size:14px}
.me{opacity:.95}
.ai{opacity:.95}
.ai .from{font: 700 12px/1 Orbitron,monospace; letter-spacing:.08em; opacity:.9}
.ai.aj  .from{color:#ffd54f}
.ai.mi  .from{color:#ff9cc6}
.ai.gu  .from{color:#9fd2ff}

.ghost-input{
  width:100%; margin-top:12px; padding:14px 16px; border:0; outline:0;
  border-radius:16px; color:#eaf1ff; background:rgba(255,255,255,.05);
  box-shadow: inset 0 0 24px rgba(255,255,255,.06);
  font-size:14px;
}
.ghost-input::placeholder{color:rgba(234,241,255,.55)}
/* --- Center + Cosmic Dome --- */
/* 整個聊天區域置中、限制最大寬度 */
.chat-zone{
  position: fixed; left: 50%; top: 20vh; transform: translateX(-50%);
  width: min(86vw, 980px);
  z-index: 4;  /* 在漂浮鳥上層：若想讓鳥在上面，這裡改 2 */
  pointer-events: auto;
}

/* 膠囊視窗（不再是直角框） */
.chat-stream.dome{
  min-height: 180px; max-height: 48vh; overflow: auto;
  padding: 22px 24px;
  border-radius: 28px; 
  backdrop-filter: blur(12px) saturate(120%);
  background:
    radial-gradient(120% 160% at 20% 10%, rgba(155,205,255,.07), transparent 60%),
    radial-gradient(120% 140% at 80% 90%, rgba(255,205,245,.08), transparent 60%),
    rgba(12,20,40,.42);
  box-shadow:
    0 10px 36px rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.06) inset;
  position: relative;
}

/* 環形發光邊（柔和、非硬框） */
.chat-stream.dome::before{
  content:''; position:absolute; inset:-2px; border-radius:inherit;
  background: conic-gradient(from 180deg,
    rgba(255,240,180,.55), rgba(170,210,255,.55), rgba(255,200,245,.55), rgba(255,240,180,.55));
  filter: blur(10px) saturate(120%);
  opacity:.35; z-index:-1;
}

/* 微微呼吸亮點（不規則、去方形感） */
.chat-stream.dome::after{
  content:''; position:absolute; inset:0; border-radius:inherit;
  background-image:
    radial-gradient(6px 6px at 12% 18%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(5px 5px at 78% 22%, rgba(255,255,255,.35), transparent 60%),
    radial-gradient(4px 4px at 36% 70%, rgba(255,255,255,.25), transparent 60%),
    radial-gradient(3px 3px at 66% 56%, rgba(255,255,255,.25), transparent 60%);
  animation: domeTwinkle 3.6s ease-in-out infinite alternate;
  opacity:.6; pointer-events:none;
}
@keyframes domeTwinkle { to{ opacity:.2; transform: translateY(-2px) } }

/* 氣泡微圓角＋半透明（讓膠囊看起來更一體） */
.msg{ 
  border-radius: 16px;
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(6px);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* 標題區一起置中對齊（上方英/中兩行） */
.cps-header, .cps-sub{ left:50%; transform:translateX(-50%); text-align:center; }
/* === Cosmic Post Station 專用（置中膠囊 + 漂浮拼貼） === */

/* 頁首小字 */
.cps-header{ position:fixed; left:50%; top:26px; transform:translateX(-50%); text-align:center; line-height:1.2; letter-spacing:.08em; z-index:5; }
.cps-header .en{ font-family:Orbitron,monospace; font-size:13px; opacity:.9; text-shadow:0 0 10px rgba(160,190,255,.35); }
.cps-header .zh{ font-size:12px; opacity:.8; margin-top:4px; text-shadow:0 0 10px rgba(160,190,255,.35); }

/* 次標：會微微閃爍 */
.cps-sub{ position:fixed; left:50%; top:70px; transform:translateX(-50%); font:300 12px/1.2 Orbitron,monospace; letter-spacing:.08em; opacity:.85; animation:twinkle 2.8s infinite ease-in-out; z-index:5; }
@keyframes twinkle{ 0%,100%{opacity:.85; text-shadow:none} 50%{opacity:1; text-shadow:0 0 12px rgba(255,255,255,.6)} }

/* 星空畫布鋪滿 */
#stars{ position:fixed; inset:0; z-index:0; }

/* 不規則拼貼：2 橫 + 3 直 */
.collage{
  position:fixed; inset:auto 0 18vh 0; height:58vh; z-index:1;
  display:grid; place-items:center;
  grid-template-columns: 28vw 20vw 22vw 18vw;
  grid-auto-rows: 26vh;
  gap:2.2vw; padding:0 6vw;
}
.collage img{
  width:100%; height:100%; object-fit:cover; border-radius:20px;
  box-shadow:12px 40px 48px rgba(0,0,0,.35);
  filter:saturate(108%) contrast(105%) brightness(103%);
  opacity:.95; transform:translateY(0);
  animation:float 8s ease-in-out infinite alternate;
}
@keyframes float{ to{ transform:translateY(-14px) } }

/* 版位（可調整） */
.h{ aspect-ratio:16/9 }
.v{ aspect-ratio:9/16 }
.h1{ grid-column:1 / span 2; grid-row:1 }
.h2{ grid-column:3 / span 2; grid-row:2 }
.v-ajin{   grid-column:1; grid-row:2 }
.v-migou{  grid-column:2; grid-row:1 }
.v-gungun{ grid-column:4; grid-row:1 }

/* 對話區（置中、宇宙膠囊） */
.chat-zone{ position:fixed; left:50%; top:18vh; transform:translateX(-50%); width:min(88vw,980px); z-index:3; }
.persona-toggle{ display:flex; gap:10px; justify-content:center; margin-bottom:12px; font:400 13px/1 Orbitron,monospace; letter-spacing:.08em; opacity:.9; }

/* 膠囊視窗 */
.chat-stream.dome{
  min-height:180px; max-height:48vh; overflow:auto; padding:22px 24px;
  border-radius:28px; backdrop-filter:blur(12px) saturate(120%);
  background:
    radial-gradient(120% 160% at 20% 10%, rgba(155,205,255,.07), transparent 60%),
    radial-gradient(120% 140% at 80% 90%, rgba(255,205,245,.08), transparent 60%),
    rgba(12,20,40,.42);
  box-shadow:0 10px 36px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  position:relative;
}
.chat-stream.dome::before{
  content:''; position:absolute; inset:-2px; border-radius:inherit;
  background:conic-gradient(from 180deg, rgba(255,240,180,.55), rgba(170,210,255,.55), rgba(255,200,245,.55), rgba(255,240,180,.55));
  filter:blur(10px) saturate(120%); opacity:.35; z-index:-1;
}
.chat-stream.dome::after{
  content:''; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background-image:
    radial-gradient(6px 6px at 12% 18%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(5px 5px at 78% 22%, rgba(255,255,255,.35), transparent 60%),
    radial-gradient(4px 4px at 36% 70%, rgba(255,255,255,.25), transparent 60%),
    radial-gradient(3px 3px at 66% 56%, rgba(255,255,255,.25), transparent 60%);
  animation:domeTwinkle 3.6s ease-in-out infinite alternate; opacity:.6;
}
@keyframes domeTwinkle{ to{ opacity:.2; transform:translateY(-2px) } }

/* 訊息泡泡微玻璃 */
.msg{ margin:10px 0; line-height:1.6; font-size:14px; border-radius:16px;
  background:rgba(255,255,255,.06); backdrop-filter:blur(6px);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06);
}
.me{ opacity:.95; }
.ai{ opacity:.95; }
.ai.aj { color:#ffd54f }
.ai.mi { color:#ff9ccc }
.ai.gu { color:#9bd2ff }
