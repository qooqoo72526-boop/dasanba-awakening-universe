:root{
  --fg:#EDEFFD;
  --dim:#9BB0C9;
  --gold:#ffdf86;
  --pink:#ffb6cf;
  --blue:#9bd0ff;
  --glass: rgba(20,28,48,.35);
  --blur: 14px;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#080b16;color:var(--fg);
  font-family:"Noto Sans TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
.en{font-family:"Orbitron", monospace; letter-spacing:.6px}

#stars{position:fixed;inset:0;z-index:0;display:block}

.cps-header{position:fixed;top:14px;left:0;right:0;z-index:2;text-align:center;pointer-events:none}
.cps-header .en{font-size:12px;color:var(--dim);filter:drop-shadow(0 0 6px rgba(100,180,255,.35))}
.cps-header .zh{margin-top:4px;font-size:12px;color:#b7c8ff;opacity:.9}

.cps-sub{position:fixed;top:56px;left:0;right:0;text-align:center;z-index:2;
  font-size:12px;color:#bcd2ff;opacity:.85}

.collage{
  position:fixed; inset:0 0 0 0; z-index:1; display:grid;
  grid-template-columns: 28vw 20vw 28vw;
  grid-template-rows: 34vh 34vh;
  place-items:center;
  pointer-events:none;
}
.collage img{user-select:none; -webkit-user-drag:none; filter:saturate(1.05)}
.h{width:100%;max-width:1040px; border-radius:28px;
   box-shadow:0 10px 30px rgba(0,0,0,.25); opacity:.42; animation:slowFloat 18s ease-in-out infinite}
.h1{grid-column:1/span 2; grid-row:1}
.h2{grid-column:2/span 2; grid-row:2}

.v{position:absolute; width:min(30vw,440px); aspect-ratio:3/4; object-fit:contain;
   filter: drop-shadow(0 18px 40px rgba(0,0,0,.55));
   animation:birdFloat 7s ease-in-out infinite; image-rendering:auto}
.v-ajin{left:7vw; top:50%; transform:translateY(-50%) rotate(-4deg)}
.v-migou{right:9vw; top:22%; transform:rotate(6deg)}
.v-gungun{right:12vw; bottom:6%; transform:rotate(-3deg)}
.v::after{content:""; position:absolute; inset:-18px; border-radius:40px; pointer-events:none;
  box-shadow:0 0 24px rgba(255,255,255,.12), 0 0 60px rgba(140,190,255,.18)}

@keyframes birdFloat{
  0%,100%{transform:translateY(-2px) scale(1) rotate(var(--rot,0deg))}
  50%{transform:translateY(8px) scale(1.01) rotate(var(--rot,0deg))}
}
@keyframes slowFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

.cosmic-dialog{
  position:fixed; left:50%; top:52%; transform:translate(-50%,-50%);
  width:min(960px, calc(100vw - 36px));
  background:linear-gradient(180deg, rgba(140,160,200,.08), rgba(18,24,42,.35));
  backdrop-filter: blur(var(--blur)) saturate(1.3);
  -webkit-backdrop-filter: blur(var(--blur)) saturate(1.3);
  border-radius:22px; padding:18px 18px 12px; z-index:3;
  box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.08);
}
.persona-toggle{
  display:flex; gap:16px; align-items:center; padding:4px 6px 10px; color:#dfe8ff;
  font-size:13px;
}
.persona-toggle input{accent-color:#ffd773}
.persona-toggle label{opacity:.9}

.chat-stream{
  height:min(46vh, 420px); overflow:auto; padding:10px 8px;
  display:flex; flex-direction:column; gap:10px;
}
.chat-stream::-webkit-scrollbar{width:6px;height:6px}
.chat-stream::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:50px}

.msg{padding:10px 12px; border-radius:16px; line-height:1.6; font-size:15px; max-width:84%;
  box-shadow:0 10px 24px rgba(0,0,0,.25)}
.me{align-self:flex-end; background:rgba(255,255,255,.1)}
.aj{background:rgba(255,222,128,.18); border:1px solid rgba(255,222,128,.28)}
.mi{background:rgba(255,172,200,.16); border:1px solid rgba(255,172,200,.28)}
.gu{background:rgba(150,210,255,.16); border:1px solid rgba(150,210,255,.28)}
.msg .name{display:block; font-size:12px; opacity:.8; margin-bottom:2px; letter-spacing:.4px}
.msg .name.en{font-family:"Orbitron"}

.composer{display:flex; gap:8px; padding:10px 2px 8px}
#cps-input{
  flex:1; height:42px; border-radius:14px; border:1px solid rgba(255,255,255,.16);
  background:rgba(12,16,28,.45); color:var(--fg); padding:0 14px; font-size:15px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.06)
}
#send{
  height:42px; padding:0 16px; border-radius:12px; border:none; cursor:pointer;
  background:linear-gradient(90deg, #ffd773, #ffb6cf); color:#232a3f; font-weight:700
}

/* 發光 / 星塵動畫 */
@keyframes glowPulse{0%,100%{filter:drop-shadow(0 0 0 rgba(255,255,255,.0))}50%{filter:drop-shadow(0 0 18px rgba(255,255,255,.45))}}
.v-ajin,.v-migou,.v-gungun{animation-name:birdFloat, glowPulse; animation-duration:7s, 2.4s; animation-iteration-count:infinite,infinite}

/* 小螢光字 */
.cps-header .en,.cps-header .zh,.cps-sub{text-shadow:0 0 8px rgba(120,170,255,.25)}
