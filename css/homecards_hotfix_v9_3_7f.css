/* v9.3.7f — Homepage cards only (no background changes) */
body:not([data-page]) .cards,
body[data-page="home"] .character-cards,
.character-cards{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:clamp(14px,2vw,22px);
  align-items:stretch;
}
.character-card,
body:not([data-page]) .cards .card{
  position:relative;
  border-radius:20px;
  overflow:hidden;
  aspect-ratio:5/6;
  min-height:300px;
  background:rgba(255,255,255,.02);
  backdrop-filter:blur(8px);
  box-shadow:0 10px 30px rgba(0,0,0,.18),0 0 0 1px rgba(255,255,255,.06) inset;
  transform:translateZ(0);
  transition:transform .25s ease,box-shadow .25s ease;
}
body:not([data-page]) .cards .card:hover{
  transform:translateY(-8px);
  box-shadow:0 24px 50px rgba(0,0,0,.22),0 0 0 1px rgba(255,255,255,.08) inset;
}
body:not([data-page]) .cards .card img{
  width:100%;height:65%;
  object-fit:cover;object-position:50% 18%;
  display:block;
  filter:drop-shadow(0 0 14px rgba(255,255,255,.28));
}
body:not([data-page]) .cards .card h3{
  display:inline-flex;align-items:center;gap:6px;justify-content:center;
  text-align:center;white-space:nowrap;font-size:clamp(16px,1.8vw,20px);margin:10px 0 0;
}
body:not([data-page]) .cards .card .heart{
  position:absolute;top:10px;right:12px;z-index:3;
  animation:heartFloat 3.2s ease-in-out infinite;
  filter:drop-shadow(0 0 6px rgba(255,255,255,.35));pointer-events:none;
}
body:not([data-page]) .cards .card::after{
  content:"";position:absolute;inset:-2px;border-radius:22px;
  background:radial-gradient(60% 40% at 50% 10%,rgba(255,255,255,.12),rgba(255,255,255,0) 70%);
  opacity:.8;pointer-events:none;
}
body:not([data-page]) .gallery .gframe{
  width:90%;max-width:1200px;aspect-ratio:16/9;border-radius:16px;overflow:hidden;
  margin:clamp(36px,4vh,56px) auto 0;display:flex;justify-content:center;align-items:center;
}
body:not([data-page]) .gallery .gimg{display:none;width:100%;height:100%;object-fit:cover;}
body:not([data-page]) .gallery .gimg.active{display:block;animation:galleryFade 1.1s ease;}
@keyframes galleryFade{from{opacity:0;transform:scale(1.01);}to{opacity:1;transform:scale(1);}}
@keyframes heartFloat{0%{transform:translateY(0)}50%{transform:translateY(-4px)}100%{transform:translateY(0)}}
@media (max-width:1024px){
  body:not([data-page]) .cards{gap:16px;}
  body:not([data-page]) .cards .card{width:28vw!important;height:calc(28vw*6/5)!important;}
}
@media (max-width:768px){
  body:not([data-page]) .cards{grid-template-columns:1fr;gap:12px;}
  body:not([data-page]) .cards .card{width:86vw!important;height:calc(86vw*6/5)!important;}
  body:not([data-page]) .gallery .gframe{min-height:34vh;}
}
/* 卡片 5:6 直立 + 柔光暈與懸浮 */
.cards .card{
  position:relative;
  aspect-ratio: 5 / 6;
  border-radius:20px;
  overflow:hidden;
  box-shadow: 0 10px 28px rgba(0,0,0,.22);
  transition: transform .25s ease, box-shadow .25s ease;
}
.cards .card:hover{
  transform: translateY(-6px);
  box-shadow: 0 22px 48px rgba(0,0,0,.28);
}
/* 卡片本體淡淡外發光 */
.cards .card::after{
  content:"";
  position:absolute; inset:-1px;
  pointer-events:none; border-radius:inherit;
  box-shadow: 0 0 0 1px rgba(255,255,255,.08), 0 0 36px rgba(140,180,255,.18);
}

/* 點擊仙女棒擴散光暈（加在卡片上時） */
.cards .card.sparkle{
  animation: wand .65s ease-out;
}
@keyframes wand{
  0%{ box-shadow: 0 0 0 1px rgba(255,255,255,.1), 0 0 0 rgba(160,200,255,.0); }
  50%{ box-shadow: 0 0 0 1px rgba(255,255,255,.18), 0 0 64px rgba(160,200,255,.45); }
  100%{ box-shadow: 0 0 0 1px rgba(255,255,255,.1), 0 0 0 rgba(160,200,255,.0); }
}

/* 卡片內愛心：固定右上 + 漂浮 */
.card .heart{
  position:absolute; top:10px; right:12px; z-index:3;
  filter: drop-shadow(0 0 8px rgba(255,255,255,.35));
  animation: floatY 3.6s ease-in-out infinite;
}
@keyframes floatY{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-4px); }
}

/* 畫廊容器與比例（保留妳既有 HTML 結構） */
#gallery .gframe{
  width: 90%; max-width: 1200px; aspect-ratio: 16 / 9;
  border-radius:16px; overflow:hidden; margin: 0 auto;
}
#gallery .gimg{
  width:100%; height:100%; object-fit:cover; object-position:50% 12%;
  display:none; border-radius:16px; filter: drop-shadow(0 12px 22px rgba(25,25,55,.12));
}
#gallery .gimg.active{ display:block; animation: gfade 1.1s ease; }
@keyframes gfade{ from{opacity:.0; transform:scale(1.01);} to{opacity:1; transform:scale(1);} }
