
<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>âœ‰ï¸ é›²é–“ä¿¡ä»¶</title>
  <link rel="stylesheet" href="css/style.css"/>
  <style>
    .desk{max-width:950px;margin:40px auto;padding:0 16px}
    .bubble{background:var(--glass);backdrop-filter:var(--blur);border-radius:18px;padding:14px 14px;margin:8px 0;font-size:12px;line-height:1.6}
    .row{display:flex;gap:10px}
    .row>*{flex:1}
    .pill{display:inline-flex;gap:8px;border-radius:999px;padding:6px 10px;background:rgba(255,255,255,.06);font-size:11px}
    .who{font-size:11px;opacity:.85;margin-bottom:8px}
    .send{margin-top:10px;font-size:12px;border:none;border-radius:999px;padding:10px 14px;background:linear-gradient(90deg,#c6a2ff33,#93e2ff33);color:var(--fg)}
  </style>
</head>
<body class="stars">
  <div class="bg"></div>
  <div class="topbar">
    <div class="brand">CLOUD LETTERS</div>
    <nav class="nav">
      <a href="/">âŸµ è¿”å›</a>
      <a href="/soulmirror">ğŸª éˆé­‚ç…§å¦–é¡</a>
    </nav>
    <div class="lang">ğŸŒ</div>
  </div>

  <div class="desk">
    <h1 class="title">âœ‰ï¸ é›²é–“ä¿¡ä»¶</h1>
    <p class="subtitle">æŠŠå¿ƒäº‹æ”¾ä¸Šé›² è®“å®‡å®™å›ä½ ä¸€å¥çœŸå¿ƒè©±</p>

    <div class="pill">é¸æ“‡å¤¥ä¼´ï¼š
      <button class="send" onclick="setP('AJIN')">ğŸ’› AJIN</button>
      <button class="send" onclick="setP('MIGOU')">ğŸ©· MIGOU</button>
      <button class="send" onclick="setP('GUNGUN')">ğŸ©µ GUNGUN</button>
    </div>

    <div class="who">ç›®å‰å¤¥ä¼´ï¼š<span id="persona">AJIN</span></div>

    <div class="bubble cloudy">
      <textarea id="msg" rows="4" style="width:100%;background:transparent;color:var(--fg);border:none;outline:none;font-size:12px" placeholder="å¯«ä¸‹æ­¤åˆ»çš„å¿ƒæƒ…æˆ–å•é¡Œâ€¦"></textarea>
      <button class="send" onclick="go()">é€å‡º</button>
    </div>

    <div id="out"></div>
  </div>

  <script>
    let persona='AJIN';
    function setP(p){ persona=p; document.getElementById('persona').textContent=p; }
    async function go(){
      const t = document.getElementById('msg').value.trim();
      if(!t) return;
      const out = document.getElementById('out');
      const me = document.createElement('div'); me.className='bubble'; me.textContent='ä½ ï½œ'+t; out.appendChild(me);
      const wait = document.createElement('div'); wait.className='bubble'; wait.textContent='â€¦ æ˜Ÿå¡µæ­£åœ¨èšåˆ'; out.appendChild(wait);
      try{
        const r = await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({persona:persona,message:t})});
        const j = await r.json();
        wait.remove();
        const them = document.createElement('div'); them.className='bubble'; them.textContent = j.reply || 'é›²å±¤å¤ªåšï¼Œç­‰ç­‰å†è©¦è©¦ã€‚'; out.appendChild(them);
      }catch(e){
        wait.textContent='é€£ç·šå¾®å¼±ï¼Œç¨å¾Œå†è©¦ã€‚';
      }
    }
  </script>
</body>
</html>
