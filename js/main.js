
function makeStars(container,count=140){for(let i=0;i<count;i++){const s=document.createElement('div');s.className='star';s.style.left=Math.random()*100+'%';s.style.top=Math.random()*100+'%';s.style.animationDelay=(Math.random()*3)+'s';s.style.opacity=(0.3+Math.random()*0.7).toFixed(2);container.appendChild(s);}}
function spawnMeteor(){const m=document.createElement('div');m.className='meteor';const side=Math.random()<0.5?'left':'right';const startY=Math.random()*window.innerHeight*0.6+20;const startX=side==='left'?-40:window.innerWidth+40;m.style.left=startX+'px';m.style.top=startY+'px';document.body.appendChild(m);const dx=side==='left'?(window.innerWidth+120):-(window.innerWidth+120);const dy=(Math.random()*200+120)*(Math.random()<0.5?1:-1);const dur=1200+Math.random()*900;const start=performance.now();function frame(t){const p=Math.min(1,(t-start)/dur);m.style.transform=`translate(${dx*p}px, ${dy*p}px)`;m.style.opacity=String(1-p);if(p<1){requestAnimationFrame(frame);}else{m.remove();}}requestAnimationFrame(frame);if(Math.random()<0.3){m.style.boxShadow='0 0 14px 4px rgba(200,230,255,.95)';}}
function scheduleMeteors(){const next=1800+Math.random()*2200;setTimeout(()=>{spawnMeteor();scheduleMeteors();},next);}
const galleryImgs=["trio.webp","trio2.webp","trio3.webp","trio4.webp","trio5.webp","trio6.webp","trio7.webp","trio8.webp","trio9.webp","trio10.webp"];let gIndex=0;function cycleGallery(){const imgs=document.querySelectorAll('.gimg');imgs.forEach((el,i)=>el.classList.toggle('active',i===gIndex));gIndex=(gIndex+1)%imgs.length;}function startGallery(){setInterval(cycleGallery,3000);}
function hookCardRoutes(){const to={ajin:'rooms/ajin.html',migou:'rooms/migou.html',gungun:'rooms/gungun.html'};document.querySelectorAll('[data-room]').forEach(el=>{const k=el.getAttribute('data-room');el.addEventListener('click',()=>location.href=to[k]);});}
function initHome(){const starLayer=document.querySelector('.starry');if(starLayer)makeStars(starLayer,140);scheduleMeteors();startGallery();hookCardRoutes();}
document.addEventListener('DOMContentLoaded',initHome);
