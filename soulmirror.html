<!doctype html><html lang="zh-Hant"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>éˆé­‚ç…§å¦–é¡ ğŸª | SOUL MIRROR</title>
<link rel="stylesheet" href="css/universe.css"/>
<style>
body{background: radial-gradient(1200px 700px at 50% 0%, #faf6ff 0%, #efe9ff 20%, #ded6ff 36%, #b7b0f6 56%, #251b47 88%, #18122f 100%);}
.wrap{max-width:min(980px,92vw);margin:120px auto 60px}.title{text-align:center}.title .tw{font-weight:800;letter-spacing:.18em}.title .en{font-style:italic;opacity:.9}
.spell{text-align:center;margin:10px auto 22px;color:#eaf1ff}
.board{background:rgba(255,255,255,.06);border-radius:22px;backdrop-filter:blur(18px);padding:16px}
.qs{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:10px;margin:10px 0 12px}
.q{padding:12px 14px;background:rgba(255,255,255,.08);border-radius:14px}
.q:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(180,160,255,.2)}
.act{display:flex;gap:10px;justify-content:center;margin-top:10px}
button.btn{padding:10px 16px;border:none;border-radius:20px;background:rgba(255,255,255,.12);color:#eef4ff}
.result{white-space:pre-wrap;line-height:1.6;margin-top:14px}
.heads{display:flex;gap:10px;justify-content:center;margin-top:6px;filter:drop-shadow(0 0 10px rgba(200,220,255,.6))}
.heads img{width:46px;height:46px;border-radius:50%}
</style></head><body>
<nav class="nav-rail" aria-label="side">
  <a href="index.html" title="é¦–é "><svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#EAF2FF" stroke-width="1.5"><path d="M3 11.5 L12 4 L21 11.5"/><path d="M6 10.5 V20 H18 V10.5"/></svg></a>
  <a href="cosmic-post-station.html" title="å®‡å®™éƒµå±€"><svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#EAF2FF" stroke-width="1.5"><rect x="3" y="5" width="18" height="14" rx="3" ry="3" opacity=".25"></rect><path d="M3.6 7.2 L12 12.8 L20.4 7.2"/></svg></a>
  <a href="soulmirror.html" title="éˆé­‚ç…§å¦–é¡"><svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#EAF2FF" stroke-width="1.5"><ellipse cx="12" cy="9" rx="6.5" ry="5.5"/><path d="M12 14.5 v4.5"/><path d="M9.5 20.5 h5"/></svg></a>
</nav>
<div class="wrap">
  <div class="title"><div class="tw">éˆé­‚ç…§å¦–é¡ ğŸª</div><div class="en"><em>Soul Mirror</em></div></div>
  <div class="spell">ğŸª„ åœ¨é¡ä¸­å‡è¦–ä½ çš„æ„è­˜è»Œè·¡ï¼Œ<br/>Scry your pattern, face the truth,<br/>and come back reborn.</div>
  <div class="board">
    <div id="qs" class="qs"></div>
    <div class="act"><button class="btn" id="regen">é‡æ–°æŠ½ 25 é¡Œ</button><button class="btn" id="analyze">é€å‡ºä¸¦ç”Ÿæˆ 600 å­—è§£æ</button></div>
    <div class="heads"><img src="assets/icon_ajin.png"><img src="assets/icon_migou.png"><img src="assets/icon_gungun.png"></div>
    <div id="res" class="result"></div>
  </div>
</div>
<script>
const KEY="mirror_500";
async function ensurePool(){
  let pool = localStorage.getItem(KEY);
  if(pool){ try{ return JSON.parse(pool);}catch(e){} }
  const r = await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"mirror",messages:[{role:"user",content:"è«‹è¼¸å‡º 500 é¡Œä¸­æ–‡ JSON é™£åˆ—ï¼Œæ¯é¡Œä¸€çŸ­å¥ï¼ˆä¸è¦ç·¨è™Ÿï¼‰ã€‚"}]})});
  const j = await r.json(); const txt = j?.choices?.[0]?.message?.content || "[]";
  let arr=[]; try{ arr = JSON.parse(txt);}catch(e){ arr=[]; }
  if(!Array.isArray(arr)||arr.length<100){arr = Array.from({length:500},(_,i)=>`è«‹èªªå‡ºç¬¬ ${i+1} å€‹çœŸå¿ƒè©±ã€‚`);}
  localStorage.setItem(KEY, JSON.stringify(arr.slice(0,500)));
  return arr.slice(0,500);
}
function pick25(pool){const used=new Set(), out=[]; while(out.length<25){const i=Math.floor(Math.random()*pool.length); if(used.has(i)) continue; used.add(i); out.push(pool[i]);} return out;}
function render(items){const box=document.getElementById('qs'); box.innerHTML=""; items.forEach(q=>{ const d=document.createElement('div'); d.className='q'; d.textContent=q; d.addEventListener('click',()=>{d.style.background="rgba(255,255,255,.18)"; d.style.transform="translateY(-2px) scale(1.01)";}); box.appendChild(d); });}
let CURRENT=[];(async()=>{const pool=await ensurePool(); CURRENT = pick25(pool); render(CURRENT); })();
document.getElementById('regen').onclick = async()=>{const pool=await ensurePool(); CURRENT = pick25(pool); render(CURRENT); };
document.getElementById('analyze').onclick = async()=>{const res=document.getElementById('res'); res.textContent="ç”Ÿæˆä¸­â€¦"; const prompt=`æ ¹æ“šä»¥ä¸‹ 25 é¡Œèˆ‡ä½¿ç”¨è€…å¿ƒå¢ƒï¼Œå¯«å‡º 600 å­—ä¸­æ–‡æ·±åº¦è§£æï¼Œæœ€å¾Œå„ 1 å¥è©±ï¼ˆè‡ªç„¶èªæ°£ï¼‰çµ¦é˜¿é‡‘ã€ç±³æœã€æ»¾æ»¾ã€‚
é¡Œç›®ï¼š
${CURRENT.map((q,i)=>`${i+1}. ${q}`).join("
")}`; const r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kind:"mirror",messages:[{role:"user",content:prompt}]})}); const j=await r.json(); res.textContent=(j?.choices?.[0]?.message?.content||"å®‡å®™æ­£åœ¨å›ä¿¡â€¦").trim(); };
</script></body></html>