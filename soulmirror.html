<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>靈魂照妖鏡｜Soul Mirror</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- 用你現在的銀藍 CSS，不要動它 -->
  <link rel="stylesheet" href="/css/universe_soul.css" />
</head>
<body class="soulmirror-body">
  <div id="soulmirror-root">
    <!-- 頂部標題 -->
    <header class="soul-header">
      <div class="soul-title-block">
        <div class="soul-tag">SOUL MIRROR / VISION LOG</div>
        <h1 class="soul-title-en">SOUL MIRROR｜SYSTEM VIEW</h1>
        <h2 class="soul-title-zh">今天的你，長這樣。</h2>
      </div>
      <div class="soul-status">
        <span id="question-count">測試模式</span>
        <span id="answer-status">看看泡泡會不會出現。</span>
      </div>
    </header>

    <!-- 主視覺 -->
    <main class="soul-main">
      <!-- 背景星塵＋法陣 -->
      <div class="soul-bg-layer">
        <canvas id="soul-stars"></canvas>
        <div class="soul-core-ring core-1"></div>
        <div class="soul-core-ring core-2"></div>
        <div class="soul-core-ring core-3"></div>
      </div>

      <!-- 題目節點層 -->
      <div class="soul-node-layer" id="soul-node-layer">
        <!-- 這裡我們用 JS 生出 1 顆泡泡 -->
      </div>
    </main>
  </div>

  <!-- 超精簡測試用 JS，直接寫在頁面裡 -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // 1. 先確認這支 JS 有被執行
      console.log("Soul Mirror test JS loaded.");
      // 如果你開 F12 → Console，要能看到這一行

      // 2. 抓節點層
      var nodeLayer = document.getElementById("soul-node-layer");
      if (!nodeLayer) {
        alert("找不到 #soul-node-layer，代表 HTML 路徑不對。");
        return;
      }

      // 3. 產生一顆「測試題目」泡泡
      var node = document.createElement("div");
      node.className = "soul-node";
      node.textContent = "測試題目：如果你看得到我，代表 JS 有在跑。";

      // 放在正中央
      node.style.left = "50%";
      node.style.top = "50%";
      node.style.transform = "translate(-50%, -50%)";

      nodeLayer.appendChild(node);

      // 4. 順便畫星星（跟之前一樣）
      drawStars();
    });

    // 星塵動畫（跟之前邏輯一樣）
    function drawStars() {
      var canvas = document.getElementById("soul-stars");
      if (!canvas) return;
      var ctx = canvas.getContext("2d");
      var w = (canvas.width = canvas.offsetWidth || canvas.clientWidth || 800);
      var h = (canvas.height = canvas.offsetHeight || canvas.clientHeight || 480);

      var stars = [];
      var count = 120;
      for (var i = 0; i < count; i++) {
        stars.push({
          x: Math.random() * w,
          y: Math.random() * h,
          r: Math.random() * 1.2 + 0.3,
          a: Math.random() * Math.PI * 2,
          s: Math.random() * 0.4 + 0.05
        });
      }

      function step() {
        ctx.clearRect(0, 0, w, h);
        ctx.fillStyle = "#ffffff";
        for (var i = 0; i < stars.length; i++) {
          var star = stars[i];
          star.a += star.s * 0.02;
          var alpha = 0.2 + 0.6 * (0.5 + 0.5 * Math.sin(star.a));
          ctx.globalAlpha = alpha;
          ctx.beginPath();
          ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
          ctx.fill();
        }
        requestAnimationFrame(step);
      }
      step();
    }
  </script>
</body>
</html>
