
<!doctype html><html lang="zh-Hant"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>å®‡å®™éƒµå±€ | COSMIC POST STATION</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Noto+Sans+TC:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/css/universe.css"></head>
<body data-universe="post">
<nav class="nav-rail">
  <a href="/index.html"><i>âŒ‚</i></a>
  <a href="/cosmic-post-station.html"><i>âœ‰</i></a>
  <a href="/soulmirror.html"><i>ğŸª</i></a>
</nav>
<section class="chat-wrap">
  <div class="chat-title">COSMIC POST STATION âœ‰</div>
  <div class="bubbles" id="bubbles">
    <div class="bubble"><img class="avatar-glow" src="/assets/icons/icon_migou.png" alt="">å˜¿ï¼Œæˆ‘åœ¨ã€‚ä½ ä»Šå¤©å¿ƒæƒ…æ€éº¼äº†ï¼Ÿ</div>
  </div>
  <div class="chat-input">
    <input id="msg" placeholder="åœ¨å®‡å®™è£¡èªªé»ä»€éº¼å§â€¦"/>
    <button id="send">é€å‡º</button>
  </div>
</section>
<script>
const order=[
  {who:'you',icon:'/assets/icons/icon_you.png'},
  {who:'ajin',icon:'/assets/icons/icon_ajin.png',sfx:'/assets/sfx/reply_ajin.wav'},
  {who:'migou',icon:'/assets/icons/icon_migou.png',sfx:'/assets/sfx/reply_migou.wav'},
  {who:'gungun',icon:'/assets/icons/icon_gungun.png',sfx:'/assets/sfx/reply_gungun.wav'}
];
let turn=0; const bub=document.getElementById('bubbles');
function addLine(text,who='you'){ const cfg=order.find(o=>o.who===who)||order[0];
  const d=document.createElement('div'); d.className='bubble'; d.innerHTML=`<img class="avatar-glow" src="${cfg.icon}">`+text;
  bub.appendChild(d); d.scrollIntoView({behavior:'smooth',block:'end'});
  if(cfg.sfx){ const a=new Audio(cfg.sfx); a.play().catch(()=>{}); }
}
document.getElementById('send').onclick=async()=>{
  const v=document.getElementById('msg').value.trim(); if(!v) return;
  addLine(v,'you'); document.getElementById('msg').value='';
  try{
    const r=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({persona:order[(++turn)%3+1].who,text:v})});
    const j=await r.json(); const who=order[(turn)%3+1].who;
    addLine(j.reply||'æ”¶åˆ°ã€‚',who);
  }catch(e){ const who=order[(turn)%3+1].who; addLine('å…ˆè¨˜ä¸‹ä¾†äº†ã€‚',who); }
};
</script>
<script src="/js/main.js"></script>
</body></html>
